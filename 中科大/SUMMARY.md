[TOC]

# Before

+ 视频地址

[中科大计算机网络（本科）](https://www.bilibili.com/video/BV1JV411t7ow/?spm_id_from=333.337.search-card.all.click&vd_source=1f34a6ceb5f94e03bf29c23614b6a35b)

[中科大《高级计算机网络》（研究生）](https://www.bilibili.com/video/BV1BL4y1J7vh/?spm_id_from=333.999.0.0&vd_source=1f34a6ceb5f94e03bf29c23614b6a35b)

## 教学目标

+ 掌握计算机网络
  + 基本概念
  + 工作原理
  + 常用技术
+ 为将来学习、应用和研究计算机网络打下一个坚实的基础

## 课程主要内容

+ 计算机网络和互联网
+ 应用层
+ 传输层
+ 网络层：数据平面
+ 网络层：控制平面
+ 数据链路层和局域网
+ 网络安全
+ 无线和移动网络
+ 多媒体网络
+ 网络管理

# Chapter 1: 计算机网络概述

<u>目标：</u>

+ 了解基本术语和概念
+ 掌握网络的基本原理
+ 为后续章节更深入的学习打下基础
+ 方法：
  + 以Internet为例子

<u>提纲：</u>

+ 什么是Internet？
+ 什么是协议？
+ 网络边缘
+ 接入网、物理媒介
+ 网络核心：分组交换、线路交换
+ Internet/ISP结构
+ 性能：丢包、延时、吞吐量
+ 协议层次、服务模型
+ 历史

[slides](../中科大/slides/计算机网络-郑老师-第1章.pdf)

## 1.1 什么是Internet？

**各种网络的概念区分**

-----------

<u>网络</u>：由节点和边构成的与大小形状无关的图

<u>计算机网络</u>：联网的计算机构成的系统：

节点：包括主机节点和数据交换节点，数据交换节点按照其工作的层次不同可以分为中继器、交换机、路由器、负载循环设备

边：包括接入网和主干链路，接入网：主机节点与交换机相连；主干链路：数据交换节点之间的

<u>互联网</u>：以TCP协议和IP协议为组的一簇协议来支撑起工作的网络

**什么是Internet:从具体构成角度**

-------------

+ 节点
  + 主机及其上运行的应用程序
  + 路由器、交换机等网络交换设备
+ 边：通信链路
  + 接入网链路：主机连接到互联网的链路
  + 主干链路：路由器间的链路
+ 协议：对等层的实体在通讯的过程中应该遵守的规则集合

+ 数以亿计的、互联的计算设备：
  + 主机=端系统
  + 运行网络应用程序
+ 通信链路
  + 光纤、同轴电缆、无线电、卫星
  + 传输速率=带宽（bps）
+ 分组交换设备：转发分组（packets）
  + 路由器和交换机
+ 协议控制发送、接收消息
  + 如TCP、IP、HTTP、FTP、PPP
  + 什么是协议?:对等层的实体在通讯的过程中应该遵守的规则集合，包括格式、次序和动作
    + <u>人类协议：</u>“几点了？”、“我有个问题”、“你好”
    + <u>网络协议：</u>：类似人类协议、机器之间的协议而非人与人之间的协议、Internet中所有的通信行为都收协议制约
    + **协议定义了在两个或多个通信实体之间交换的报文格式和次序，以及在报文传输和/或接收或其他事件方面所采取的动作**
+ Internet:“网络的网络”
  + 松散的层次结构，互连的ISP
  + 公共Internet vs. 专用intranet
+ Internet标准
  + RFC:Request for comments
  + IETF:Internet Engineering Task Force

**什么是Internet:从服务角度**

------------------

+ 使用通信设施进行通信的**分布式应用**
  + Web、VoIP、email、分布式游戏、电子商务、社交网络
+ **通信基础**设施为apps提供编程接口（通信服务）
  + 将发送和接收数据的apps与互联网连接起来
  + 为app应用提供服务选择，类似于邮政服务：
    + 无连接不可靠服务（UDP）
    + 面向连接的可靠性服务（TCP）


## 1.2 网络边缘

**网络结构**

------------

+ **网络边缘**
  + 主机
  + 应用程序（客户端和服务器）
+ **网络核心**
  + 互连着的路由器
  + 网络的网络
+ **接入网、物理媒体**
  + 有线或者无线通信链路

**网络边缘**

--------------------

+ 端系统（主机）：
  + 运行应用程序
  + 如Web、email
  + 在”网络的边缘“
+ 客户/服务器模型：
  + 可拓展性差
  + 客户端向服务器请求、接收服务
  + 如Web浏览器/服务器：email客户端/服务器
+ 对等（peer-peer）模式
  + 很少（甚至没有）专门的服务器
  + 如Gnutella、KaZaA、Emule

**网络边缘：采用网络设施的面向连接服务**

<u>目标：</u>在端系统之间传输数据

+ 握手：在数据传输之前做好准备
  + 人类协议中：你好、你好
  + 两个通信主机之间为连接建立状态
+ TCP-传输控制协议（Transmission Control Protocol）
  + Internet上面向连接的服务

<u>TCP服务</u>[RFC 793]

+ 可靠地、按顺序地传送数据
  + 确认和重传
+ 流量控制
  + 发送方不会淹没接收方
+ 拥塞控制
  + 当网络拥塞时，发送方降低发送速率

> 面向连接&有连接
>
> 面向连接：双方网络应用程序知道、双方底层协议栈TCP知道，但网络不知道，通信的状态只是在端系统当中维护
>
> 有连接：
>
> 网络也要知道，中间所有路径上的节点都知道

**网络边缘：采用基础设施的无连接服务**

----------

<u>目标：</u>在端系统之间传输数据

+ 无连接服务

<u>UDP</u>-用户数据报协议（User Datagram Protocol）[RFC 768]：

+ 无连接
+ 不可靠数据传输
+ 无流量控制
+ 无拥塞控制

<u>使用TCP的应用：</u>

+ HTTP(Web)，FTP(文件传送)，Telnet(远程登录)，SMTP(email)

<u>使用UDP的应用：</u>

+ 流媒体、远程会议、DNS、Internet电话

## 1.3 网络核心

**网络核心**

----------------

<u>网络核心：</u>路由器的网状网络

<u>基本问题：</u>数据怎样通过网络进行传输？

+ 电路交换：为每个呼叫预留一条专有电路：如电话网
+ 分组交换：
  + 将要传送的数据分成一个个单位
  + 将分组从一个路由器传到相邻路由器（hop），一段段最终从源端传到目标端
  + 每段：采用链路的最大传输能力（带宽）

**网络核心：电路交换**

------------------------

**端到端的资源被分配给从源端到目标端的呼叫“call”：**

<u>如果每段链路有四条线路</u>

+ 该呼叫采用了上面链路的第2个线路，右边链路的第1个线路（piece）

<u>独享资源：不共享</u>

<u>如果呼叫没有数据发送，被分配的资源就会被浪费（no sharing）</u>

<u>通常被传统电话网络采用</u>

**为呼叫预留端-端资源**

+ 链路带宽、交换能力
+ 专用资源：不共享
+ 保证性能
+ 要求建立呼叫连接

**网络资源（如带宽）被分成片**

+ 为呼叫分配片
+ 如果某个呼叫没有数据，则资源片处于空闲状态（不共享）
+ 将带宽分成片
  + 频分（Frequency-division multiplexing）
  + 时分（Time-division multiplexing）
  + 波分（Wave-division multiplexing）

**电路交换不适合计算机之间的通信**

+ 连接建立时间长
+ 计算机之间的通信有突发性，如果使用线路交换，则浪费的片较多
  + 即使这个呼叫没有数据传递，其所占据的片也不能够被别的呼叫使用
+ 可靠性不高

**网络核心：分组交换**

-----------------

以分组为单位**存储-转发**方式

+ 网络带宽资源不再分为一个个片，传输时使用全部带宽
+ 主机之间传输的数据被分为一个个分组

资源共享，按需使用

+ 存储-转发：分组每次移动一跳（hop）
  + 在转发之前，节点必须收到整个分组
  + 延迟比线路交换要大
  + 排队时间

**分组交换：存储-转发**

------------

+ 被传输到下一个链路之前，整个分组必须到达路由器：存储-转发
+ 在一个速率为**R bps**的链路，一个长度为**L bits**的分组的存储转发延时：**L/R s**

**分组交换：排队延迟和丢失**

-------------

如果到达速率>链路的输出速率

+ 分组将会排队，等待传输
+ 如果路由器的缓存用完了，分组将会被抛弃

**网络核心的关键功能**

-------------

**路由：**决定分组采用源到目标的路径

+ 路由算法
+ 转发：将分组从路由器的输入链路转移到输出链路

**分组交换：统计多路复用**

-----------

A&B 时分复用链路资源

A&B 分组没有固定的模式 ->统计多路复用

**分组交换 vs. 电路交换**

------------

==同样的网络资源，分组交换允许更多用户使用网络！==

1 Mb/s 链路

每个用户：

+ 活动时100kb/s
+ 10%的时间是活动的

电路交换：10用户

分组交换：

+ 35用户时
+ $\geq10$个用户活动的概率为0.0004

$1-\sum_{n=0}^9{35 \choose n}p^n(1-p)^{35-n} $

==分组交换是“突发数据的胜利者？”==

+ 适合于对突发式数据传输
  + 资源共享
  + 简单，不必建立呼叫
+ 过度使用会造成网络拥塞：分组延时和丢失
  + 对可靠地数据传输需要协议来约束：拥塞控制
+ Q：怎样提供类似电路交换的服务?
  + 保证音频/视频应用需要的带宽
  + 一个仍未解决的问题（chapter 7）

Q：预约服务（线路交换）对比按需服务（分组交换）的例子

**分组交换网络：存储-转发**

+ 分组交换：分组的存储转发一段一段从源端传到目标端**按照网络层有无连接**分为：

  1. 数据报网络：

     + 分组的目标地址决定下一跳
     + 在不同的阶段，路由可以改变
     + 类似：问路
     + Internet

     工作原理：

     + 在通信之前,无须建立起一个连接,有数据就传输
     + 每一个分组都独立路由(路径不一样,可能会失序)
     + 路由器根据分组的目标地址进行路由

  2. 虚电路网络：

     + 靠信令建立

     + 每个分组都带标签（虚电路标识VC ID），标签决定下一跳
     + 在呼叫建立时决定路径，在整个呼叫中路径保持不变
     + 路由器维持每个呼叫的状态信息
     + X.25和ATM

**网络分类**

------------

+ 通信网络
  + 电路交换网络
    + FDM
    + TDM
  + 分组交换网络
    + 虚电路网络（有连接->不仅目标主机和源主机，中间所有交换节点，所以是网络层有连接，而TCP是面向连接）
    + 数据报网络

## 1.4 接入网和物理媒体

**接入网络和物理媒体**

-----------------------

Q：怎样将端系统和边缘路由器连接？

+ 住宅接入网络
+ 单位接入网络（学校、公司）
+ 无线接入网络

注意：

+ 接入网络的带宽（bits per second）？
+ 共享/专用？

**住宅接入：modem**

-------------

将上网数据**调制**加载音频信号上，在电话线上传输，在局端将其中的数据**解调**出来；反之亦然

+ 调频
+ 调幅
+ 调相位
+ 综合调制

拨号调制解调器

+ 56Kbps的速率直接接入路由器（通常更低）
+ 不能同时上网和打电话：不能总是在线

**接入网：digital subscriber line (DSL)**

----------------

语音，数据在专享线路的不同频段传输

+ 采用**现存的**到交换局DSLAM的电话线
  + DSL线路上的数据被传到互联网
  + DSL线路上的语音被传到电话网
+ <2.5Mbps上行传输速率（typically < 1Mbps）
+ < 24Mbps下行传输速率（typically < 10Mbps）

**接入网：线缆网络**

-----------------

有线电视信号线缆双向改造

**FDM:**在不同频段传输不同信道的数据，数字电视和上网数据（上下行）

data, TV transmitted at different  frequencies over shared cable distribution network

**HFC：hybrid fiber coax**

+ 非对称: 最高30Mbps的下行传输速率, 2 Mbps 上行传输速率
+ **线缆和光纤网络**将每个家庭用户接到ISP路由器
+ 各用户**共享**到线缆头端的接入网络
  + 与DSL不同, DSL每个用户一个专用线路到CO（central  office）

## 1.5 Internet结构和ISP



## 1.6 分组延时、丢失和吞吐量



## 1.7 协议层次和服务模型



## 1.8 历史



## 1.9 小结




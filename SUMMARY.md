[TOC]

# Before

+ 视频地址

[中科大计算机网络（本科）](https://www.bilibili.com/video/BV1JV411t7ow/?spm_id_from=333.337.search-card.all.click&vd_source=1f34a6ceb5f94e03bf29c23614b6a35b)

[中科大《高级计算机网络》（研究生）](https://www.bilibili.com/video/BV1BL4y1J7vh/?spm_id_from=333.999.0.0&vd_source=1f34a6ceb5f94e03bf29c23614b6a35b)

## 教学目标

+ 掌握计算机网络
  + 基本概念
  + 工作原理
  + 常用技术
+ 为将来学习、应用和研究计算机网络打下一个坚实的基础

## 课程主要内容

+ 计算机网络和互联网
+ 应用层
+ 传输层
+ 网络层：数据平面
+ 网络层：控制平面
+ 数据链路层和局域网
+ 网络安全
+ 无线和移动网络
+ 多媒体网络
+ 网络管理

# Chapter 1: 计算机网络概述

<u>目标：</u>

+ 了解基本术语和概念
+ 掌握网络的基本原理
+ 为后续章节更深入的学习打下基础
+ 方法：
  + 以Internet为例子

<u>提纲：</u>

+ 什么是Internet？
+ 什么是协议？
+ 网络边缘
+ 接入网、物理媒介
+ 网络核心：分组交换、线路交换
+ Internet/ISP结构
+ 性能：丢包、延时、吞吐量
+ 协议层次、服务模型
+ 历史

[slides](../中科大/slides/计算机网络-郑老师-第1章.pdf)

## 1.1 什么是Internet？

**各种网络的概念区分**

-----------

<u>网络</u>：由节点和边构成的与大小形状无关的图

<u>计算机网络</u>：联网的计算机构成的系统：

节点：包括主机节点和数据交换节点，数据交换节点按照其工作的层次不同可以分为中继器、交换机、路由器、负载循环设备

边：包括接入网和主干链路，接入网：主机节点与交换机相连；主干链路：数据交换节点之间的

<u>互联网</u>：以TCP协议和IP协议为组的一簇协议来支撑起工作的网络

**什么是Internet:从具体构成角度**

-------------

+ 节点
  + 主机及其上运行的应用程序
  + 路由器、交换机等网络交换设备
+ 边：通信链路
  + 接入网链路：主机连接到互联网的链路
  + 主干链路：路由器间的链路
+ 协议：对等层的实体在通讯的过程中应该遵守的规则集合

+ 数以亿计的、互联的计算设备：
  + 主机=端系统
  + 运行网络应用程序
+ 通信链路
  + 光纤、同轴电缆、无线电、卫星
  + 传输速率=带宽（bps）
+ 分组交换设备：转发分组（packets）
  + 路由器和交换机
+ 协议控制发送、接收消息
  + 如TCP、IP、HTTP、FTP、PPP
  + 什么是协议?:对等层的实体在通讯的过程中应该遵守的规则集合，包括格式、次序和动作
    + <u>人类协议：</u>“几点了？”、“我有个问题”、“你好”
    + <u>网络协议：</u>：类似人类协议、机器之间的协议而非人与人之间的协议、Internet中所有的通信行为都收协议制约
    + **协议定义了在两个或多个通信实体之间交换的报文格式和次序，以及在报文传输和/或接收或其他事件方面所采取的动作**
+ Internet:“网络的网络”
  + 松散的层次结构，互连的ISP
  + 公共Internet vs. 专用intranet
+ Internet标准
  + RFC:Request for comments
  + IETF:Internet Engineering Task Force

**什么是Internet:从服务角度**

------------------

+ 使用通信设施进行通信的**分布式应用**
  + Web、VoIP、email、分布式游戏、电子商务、社交网络
+ **通信基础**设施为apps提供编程接口（通信服务）
  + 将发送和接收数据的apps与互联网连接起来
  + 为app应用提供服务选择，类似于邮政服务：
    + 无连接不可靠服务（UDP）
    + 面向连接的可靠性服务（TCP）


## 1.2 网络边缘

**网络结构**

------------

+ **网络边缘**
  + 主机
  + 应用程序（客户端和服务器）
+ **网络核心**
  + 互连着的路由器
  + 网络的网络
+ **接入网、物理媒体**
  + 有线或者无线通信链路

**网络边缘**

--------------------

+ 端系统（主机）：
  + 运行应用程序
  + 如Web、email
  + 在”网络的边缘“
+ 客户/服务器模型：
  + 可拓展性差
  + 客户端向服务器请求、接收服务
  + 如Web浏览器/服务器：email客户端/服务器
+ 对等（peer-peer）模式
  + 很少（甚至没有）专门的服务器
  + 如Gnutella、KaZaA、Emule

**网络边缘：采用网络设施的面向连接服务**

<u>目标：</u>在端系统之间传输数据

+ 握手：在数据传输之前做好准备
  + 人类协议中：你好、你好
  + 两个通信主机之间为连接建立状态
+ TCP-传输控制协议（Transmission Control Protocol）
  + Internet上面向连接的服务

<u>TCP服务</u>[RFC 793]

+ 可靠地、按顺序地传送数据
  + 确认和重传
+ 流量控制
  + 发送方不会淹没接收方
+ 拥塞控制
  + 当网络拥塞时，发送方降低发送速率

> 面向连接&有连接
>
> 面向连接：双方网络应用程序知道、双方底层协议栈TCP知道，但网络不知道，通信的状态只是在端系统当中维护
>
> 有连接：
>
> 网络也要知道，中间所有路径上的节点都知道

**网络边缘：采用基础设施的无连接服务**

----------

<u>目标：</u>在端系统之间传输数据

+ 无连接服务

<u>UDP</u>-用户数据报协议（User Datagram Protocol）[RFC 768]：

+ 无连接
+ 不可靠数据传输
+ 无流量控制
+ 无拥塞控制

<u>使用TCP的应用：</u>

+ HTTP(Web)，FTP(文件传送)，Telnet(远程登录)，SMTP(email)

<u>使用UDP的应用：</u>

+ 流媒体、远程会议、DNS、Internet电话

## 1.3 网络核心

**网络核心**

----------------

<u>网络核心：</u>路由器的网状网络

<u>基本问题：</u>数据怎样通过网络进行传输？

+ 电路交换：为每个呼叫预留一条专有电路：如电话网
+ 分组交换：
  + 将要传送的数据分成一个个单位
  + 将分组从一个路由器传到相邻路由器（hop），一段段最终从源端传到目标端
  + 每段：采用链路的最大传输能力（带宽）

**网络核心：电路交换**

------------------------

**端到端的资源被分配给从源端到目标端的呼叫“call”：**

<u>如果每段链路有四条线路</u>

+ 该呼叫采用了上面链路的第2个线路，右边链路的第1个线路（piece）

<u>独享资源：不共享</u>

<u>如果呼叫没有数据发送，被分配的资源就会被浪费（no sharing）</u>

<u>通常被传统电话网络采用</u>

**为呼叫预留端-端资源**

+ 链路带宽、交换能力
+ 专用资源：不共享
+ 保证性能
+ 要求建立呼叫连接

**网络资源（如带宽）被分成片**

+ 为呼叫分配片
+ 如果某个呼叫没有数据，则资源片处于空闲状态（不共享）
+ 将带宽分成片
  + 频分（Frequency-division multiplexing）
  + 时分（Time-division multiplexing）
  + 波分（Wave-division multiplexing）

**电路交换不适合计算机之间的通信**

+ 连接建立时间长
+ 计算机之间的通信有突发性，如果使用线路交换，则浪费的片较多
  + 即使这个呼叫没有数据传递，其所占据的片也不能够被别的呼叫使用
+ 可靠性不高

**网络核心：分组交换**

-----------------

以分组为单位**存储-转发**方式

+ 网络带宽资源不再分为一个个片，传输时使用全部带宽
+ 主机之间传输的数据被分为一个个分组

资源共享，按需使用

+ 存储-转发：分组每次移动一跳（hop）
  + 在转发之前，节点必须收到整个分组
  + 延迟比线路交换要大
  + 排队时间

**分组交换：存储-转发**

------------

+ 被传输到下一个链路之前，整个分组必须到达路由器：存储-转发
+ 在一个速率为**R bps**的链路，一个长度为**L bits**的分组的存储转发延时：**L/R s**

**分组交换：排队延迟和丢失**

-------------

如果到达速率>链路的输出速率

+ 分组将会排队，等待传输
+ 如果路由器的缓存用完了，分组将会被抛弃

**网络核心的关键功能**

-------------

**路由：**决定分组采用源到目标的路径

+ 路由算法
+ 转发：将分组从路由器的输入链路转移到输出链路

**分组交换：统计多路复用**

-----------

A&B 时分复用链路资源

A&B 分组没有固定的模式 ->统计多路复用

**分组交换 vs. 电路交换**

------------

==同样的网络资源，分组交换允许更多用户使用网络！==

1 Mb/s 链路

每个用户：

+ 活动时100kb/s
+ 10%的时间是活动的

电路交换：10用户

分组交换：

+ 35用户时
+ $\geq10$个用户活动的概率为0.0004

$1-\sum_{n=0}^9{35 \choose n}p^n(1-p)^{35-n} $

==分组交换是“突发数据的胜利者？”==

+ 适合于对突发式数据传输
  + 资源共享
  + 简单，不必建立呼叫
+ 过度使用会造成网络拥塞：分组延时和丢失
  + 对可靠地数据传输需要协议来约束：拥塞控制
+ Q：怎样提供类似电路交换的服务?
  + 保证音频/视频应用需要的带宽
  + 一个仍未解决的问题（chapter 7）

Q：预约服务（线路交换）对比按需服务（分组交换）的例子

**分组交换网络：存储-转发**

+ 分组交换：分组的存储转发一段一段从源端传到目标端**按照网络层有无连接**分为：

  1. 数据报网络：

     + 分组的目标地址决定下一跳
     + 在不同的阶段，路由可以改变
     + 类似：问路
     + Internet

     工作原理：

     + 在通信之前,无须建立起一个连接,有数据就传输
     + 每一个分组都独立路由(路径不一样,可能会失序)
     + 路由器根据分组的目标地址进行路由

  2. 虚电路网络：

     + 靠信令建立

     + 每个分组都带标签（虚电路标识VC ID），标签决定下一跳
     + 在呼叫建立时决定路径，在整个呼叫中路径保持不变
     + 路由器维持每个呼叫的状态信息
     + X.25和ATM

**网络分类**

------------

+ 通信网络
  + 电路交换网络
    + FDM
    + TDM
  + 分组交换网络
    + 虚电路网络（有连接->不仅目标主机和源主机，中间所有交换节点，所以是网络层有连接，而TCP是面向连接）
    + 数据报网络

## 1.4 接入网和物理媒体

**接入网络和物理媒体**

-----------------------

Q：怎样将端系统和边缘路由器连接？

+ 住宅接入网络
+ 单位接入网络（学校、公司）
+ 无线接入网络

注意：

+ 接入网络的带宽（bits per second）？
+ 共享/专用？

**住宅接入：modem**

-------------

将上网数据**调制**加载音频信号上，在电话线上传输，在局端将其中的数据**解调**出来；反之亦然

+ 调频
+ 调幅
+ 调相位
+ 综合调制

拨号调制解调器

+ 56Kbps的速率直接接入路由器（通常更低）
+ 不能同时上网和打电话：不能总是在线

**接入网：digital subscriber line (DSL)**

----------------

语音，数据在专享线路的不同频段传输

+ 采用**现存的**到交换局DSLAM的电话线
  + DSL线路上的数据被传到互联网
  + DSL线路上的语音被传到电话网
+ <2.5Mbps上行传输速率（typically < 1Mbps）
+ < 24Mbps下行传输速率（typically < 10Mbps）

**接入网：线缆网络**

-----------------

有线电视信号线缆双向改造

**FDM:**在不同频段传输不同信道的数据，数字电视和上网数据（上下行）

data, TV transmitted at different  frequencies over shared cable distribution network

**HFC：hybrid fiber coax**

+ 非对称: 最高30Mbps的下行传输速率, 2 Mbps 上行传输速率
+ **线缆和光纤网络**将每个家庭用户接到ISP路由器
+ 各用户**共享**到线缆头端的接入网络
  + 与DSL不同, DSL每个用户一个专用线路到CO（central  office）

**企业接入网络（Ethernet）**

-------------

经常被企业或大学等机构采用

+ 10Mbps，100Mbps，1Gbps，10Gbps传输率
+ 现在，端系统经常直接接到以太网络交换机上

**无线接入网络**

-------------

各无线端系统共享无线接入网络（端系统到无线路由器）

+ 通过基站或者叫接入点

**无线LANs：**

+ 建筑物内部（100ft）
+ 802.11b/g (WiFi)：11,54 Mbps传输速率

**广域无线接入**

+ 由电信运营商提供（cellular）10's km
+ 1到10Mbps
+ 3G，4G：LTE

**物理媒体**

--------------------

+ **Bit**：在发送-接收对间传播
+ **物理链路**：连接每个发送-接收对之间的物理媒体
+ **导引型媒体**：信号沿着固体媒介被导引：同轴电缆、光纤、双绞线
+ **非导引型媒体**：开放的空间传输电磁波或者光信号，在电磁或者光信号中承载数字数据

<u>双绞线（TP）</u>

+ 两根绝缘铜导线拧合
  + 5类：100Mbps 以太网 ，Gbps 千兆位以太网
  + 6类：10Gbps万兆以太网

**物理媒体：同轴电缆、光纤**

-----------------

**同轴电缆**

+ 两根同轴的铜导线
+ 双向
+ 基带电缆：
  + 电缆上一个单个信道
  + Ethernet
+ 宽带电缆：
  + 电缆上有多个信道
  + HFC

**光纤和光缆**

---------------------

+ 光脉冲，每个脉冲表示一个 bit，在玻璃纤维中传输
+ 高速：
  + 点到点的高速传输（如10 Gps-100Gbps传输速率）
+ 低误码率：在两个中继器之间可以有很长的距离，不受电磁噪声的干扰
+ 安全

**物理媒介：无线链路**

----------------

+ 开放空间传输电磁波，携 带要传输的数据
+ 无需物理“线缆”
+ 双向
+ 传播环境效应：
  + 反射
  + 吸收
  + 干扰

无线链路类型：

+ 地面微波
  + eg. up to 45 Mbps channels
+ LAN (eg. WiFi)
  + 11Mbps，54Mbps，540Mbps
+ wide-area (eg. 蜂窝)
  + 3G cellular: 几Mbps
  + 4G 10Mbps
  + 5G 数Gbps
+ 卫星
  + 每个信道Kbps 到45Mbps (或者多个聚集信道) 
  + 270 msec端到端延迟
  + 同步静止卫星和低轨卫星

## 1.5 Internet结构和ISP

**互联网络结构：网络的网络**

----------------

+ 端系统通过接入ISPs (Internet Service Providers)连接到互联网
  + 住宅，公司和大学的ISPs
+ 接入ISPs相应的必须是互联的
  + 因此任何2个端系统可相互发送分组到对方
+ 导致的“网络的网络”非常复杂
  + 发展和演化是通过经济的和国家的政策来驱动的
+ 让我们采用渐进方法来描述当前互联网的结构

问题：给定数百万接入ISPs，如何将它们互联到一起

1. 将每两个ISPs直接相连，不可扩展，需要$O(N^2)$连接

选项：将每个接入ISP都连接到全局ISP（全局范围内覆盖）？客户ISPs和提供者ISPs有经济合约。但是，如果全局ISP是可行的业务，那会有竞争者有利可图，一定会有竞争。

竞争：但如果全局ISP是有利可为的业务，那会有竞争者

合作：通过ISP之间的合作可以完成业务的扩展，肯定会有互联，对等互联的结算关系

2. 然后业务会细分（全球接入和区域接入），区域网络将出现，用与将接入ISPs连接到全局ISPs
3. 然后**内容提供商网络**（Internet Content Providers, e.g.，Google，Microsoft，Akamai）可能会构建他们自己的网络，将他们的服务、内容更加靠近端用户，向用户提供更好的服务，减少自己的运营支出

在网络的最中心，一些为数不多的充分连接的大范围网络（分布广、节点有限、但是之间有着多重连接）

+ "tier-1" commercial ISPs (e.g., Level 3, Sprint, AT&T, NTT)， 国家或者国际范围的覆盖

+ content provider network (e.g., Google): 将它们的数据中心接入ISP，方便周边 用户的访问；通常私有网络之间用专网绕过第一层ISP和区域ISPs

**Internet结构：network of networks**

----------------

+ 松散的层次模型
+ 中心：第一层ISP（如UUNet, BBN/Genuity, Sprint, AT&T）国家/国际覆盖，速率极高
  + 直接与其他第一层ISP相连
  + 与大量的第二层ISP和其他客户网络相连
+ 第二层ISP: 更小些的 (通常是区域性的) ISP
  + 与一个或多个第一层ISPs，也可能与其他第二层ISP
+ 第三层ISP与其他本地ISP
  + 接入网 (与端系统最近)
+ 一个分组要经过许多网络！
+ 很多内容提供商(如：Google, Akamai )可能会部署自己的网络,连接自己的在各地的DC（数据中心），走自己的数据。连接若干local ISP和各级（包括一层）ISP,更加靠近用户

**ISP之间的连接**

-----------------

+ POP: 高层ISP面向客户网络的接入点，涉及费用结算
  + 如一个低层ISP接入多个高层ISP，多宿（multi home）
+ 对等接入：2个ISP对等互接，不涉及费用结算
+ IXP：多个对等ISP互联互通之处，通常不涉及费用结算
  + 对等接入
+ ICP自己部署专用网络，同时和各级ISP连接

## 1.6 分组延时、丢失和吞吐量

**分组丢失和延时是怎样发生的?**

------------------

在路由器缓冲区的分组队列

+ 分组到达链路的速率超过了链路输出的能力
+  分组等待排到队头、被传输

可用的缓冲区：分组到达时，如果没有可用的缓冲区，则该分组被丢掉（分组丢失）

**四种分组延时**

-------------------

1. 节点处理延时：
   + 检查bit级差错
   + 检查分组首部和决定将分组导向何处
2. 排队延时：
   + 在输出链路上等待传输的时间
   + 依赖于路由器的拥塞程度
3. 传输延时：
   + R=链路带宽(bps)
   + L=分组程度(bits)
   + 将分组发送到链路上的时间=L/R
   + 存储转发延时
4. 传播延时：
   + d=物理链路的长度
   + s=在媒体上的传播速度(≈2×10^8^ m/sec)
   + 传播延时=d/s

**车队类比**

-----------------------

汽车以100 km/hr 的速度传播，收费站服务每辆车需12s(传输时间)

汽车 ~ bit；车队（共10辆汽车） ~ 分组

**Q：在车队在第二个收费站排列好之前需要多长时间？**即：从车队的第一辆车到达第一个收费站开始计时，到这个车队的最后一辆车离开第二个收费站，共需要多少时间

+ 将车队从收费站输送到公路上的时间 = 12*10 =  120s

+ 最后一辆车从第一个收费站到第二个收费站的传播时间：

  100km/(100km/hr) = 1hr

**A：62 minutes**

若汽车以1000km/hr 的速度传播汽车，收费站服务每辆车需1分钟

**Q：在所有的汽车被第一个收费站服务之前，汽车会到达第二个收费站吗？**

+ **yes!** 7分钟后，第一辆汽车到达了第二个收费站，而第一个收费站仍有3辆汽车
+ 在整个分组被第一个路由器传输之前，第一个比特已经到达了第二个路由器！

**节点延时**

----------------------------

*d*~nodal~=*d*~proc~+*d*~queue~+*d*~trans~+*d*~prop~

+ *d*~proc~ = 处理延时
+ 通常是微秒数量级或更少
+ *d*~queue~ = 排队延时
  + 取决于拥塞程度
+ *d*~trans~ = 传输延时
  + = L/R， 对低速率的链路而言很大（如拨号），通常为微秒级 到毫秒级
+ *d*~prop~ = 传播延时
  + 几微秒到几百毫秒

**排队延时**

------------------

+ R=链路带宽(bps)
+ L=分组长度(bits)
+ a=分组到达队列的平均速率

**流量强度 = La/R**

+ La/R ~ 0： 平均排队延时很小
+ La/R -> 1： 延时变得很大
+ La/R > 1：比特到达队列的速率超过了从该队列输出的速率，平均排队延时将趋向无穷大！

**设计系统时流量强度不能大于1！**

**Internet的延时和路由**

------------------------------

+ Internet的延时和路由是什么样的呢？
+ <u>Traceroute诊断程序：</u>提供从源端，经过路由器，到目的的延时测量
  + *For all i*:
    + 沿着目的的路径，向每个路由器发送3个探测分组
    + 路由器 *i* 将向发送方返回一个分组
    + 发送方对发送和回复之间间隔计时

**分组丢失**

-------------------------

+ 链路的队列缓冲区容量有限
+ 当分组到达一个满的队列时，该分组将会丢失
+ 丢失的分组可能会被前一个节点或源端系统重传，或根本不重传

**吞吐量**

-------------------

**吞吐量：** 在源端和目标端之间传输的速率（数据量/单位时间）

+ *瞬间吞吐量：*在一个时间点的速率
+ *平均吞吐量：*在一个长时间内平均值

两条串联的链路，带宽分别为R~s~ bits/sec和R~c~ bits/sec：

+ R~s~<R~c~端到端平均吞吐是：R~s~
+ R~s~>R~c~端到端平均吞吐是：R~c~

**瓶颈链路：**端到端路径上，限制端到端吞吐的链路。其他节点都不传输，吞吐量为$\min \{ R_s,R_c\}$

更进一步：多链路串联，带宽分别为R~1~、R~2~、...、R~n~。端到端平均吞吐=$\min \{ R_1, R_2, \ldots,R_n\}$

**吞吐量：互联网场景**

---------------------------

10个连接（公平地）共享Rbps的瓶颈链路

+ 链路上的每一段实际可用带宽Ri’=?
+ 端到端吞吐量：$\min\{Ri’\}$
+ 每个连接上的端到端吞吐：$\min(R_c,R_s,R/10)$ 
+  实际上：R~c~ 或者 R~s~ 经常是瓶颈

## 1.7 协议层次和服务模型

**协议层次**

----------------

<u>网络是一个复杂的系统!</u>

+ 网络功能繁杂：数字信号的物理信号承载、点到点、路由、rdt、进程区分、应用等
+ 现实来看，网络的许多构成元素和设备:
  + 主机
  + 路由器
  + 各种媒体的链路
  + 应用
  + 协议
  + 硬件, 软件

<u>问题是：</u>

如何组织和实现这个复杂的网络功能？

**功能层次**

-----------------

层次化方式实现复杂网络功能: 

+ 将网络复杂的功能分层功能明确的层次，每一层实现了其中一个或一组功能，功能中有其上层可以使用的功能：服务
+ 本层协议实体相互交互执行本层的协议动作，目的是实现本层功能， 通过接口为上层提供更好的服务
+ 在实现本层协议的时候，直接利用了下层所提供的服务
+ 本层的服务：借助下层服务实现的本层协议实体之间交互带来的新功 能（上层可以利用的）+更下层所提供的服务

**服务和服务访问点**

---------------------------

+ 服务( Service)：低层实体向上层实体提供它们之间的通信的能力
  + 服务用户(service user)
  + 服务提供者(service provider )
+ 原语(primitive)：上层使用下层服务的形式，高层使用低层提供的服务，以及低层向高层提供服务都是通过服务访问原语来进行交互的---形式
+ 服务访问点 SAP (Services Access Point) ：上层使用下层提供的服务通过层间的接口—地点；
  + 例子:邮箱
  + 地址(address)：下层的一个实体支撑着上层的多个实体， SAP有标志不同上层实体的作用
  + 可以有不同的实现，队列
  +  例子:传输层的SAP: 端口(port)

**服务的类型**

-----------------------

+ 面向连接的服务和无连接的服务-方式
  + 面向连接的服务（Connection-oriented Service）
    + 连接(Connection)：两个通信实体为进行通信而建立的一 种结合
    + 面向连接的服务通信的过程：建立连接，通信，拆除连接
    + 面向连接的服务的例子：网络层的连接被成为虚电路
    + 适用范围：对于大的数据块要传输; 不适合小的零星报文
    + 特点：保序
    + 服务类型:
      + 可靠的信息流   传送页面(可靠的获得,通过接收方的确认)
      + 可靠的字节流    远程登录
      + 不可靠的连接   数字化声音
  + 无连接的服务(Connectionless Service)
    + 无连接服务：两个对等层实体在通信前不需要建 立一个连接，不预留资源；不需要通信双方都是 活跃；(例：寄信)
    + 特点：不可靠、可能重复、可能失序
    + IP分组，数据包；
    + 适用范围：适合传送零星数据；
    + 服务类型：
      + 不可靠的数据报   电子方式的函件
      + 有确认的数据报   挂号信
      + 请求回答   信息查询

**服务和协议**

---------------------

+ 服务与协议的区别
  + 服务(Service)：低层实体向上层实体提供它们之间的通信的能力，是通过原语(primitive)来操作的，垂直
  + 协议(protocol) ：对等层实体(peer entity)之间在相互 通信的过程中，需要遵循的规则的集合，水平
+ 服务与协议的联系
  + 本层协议的实现要靠下层提供的服务来实现
  + 本层实体通过协议为上层提供更高级的服务

**数据单元(DU)**

---------------------

+ SAP = Service Access Point
+ IDU = Interface Data Unit
+ SDU = Service Data Unit
+ PDU = Protocol Data Unit
+ ICI = Interface Control Information

**Internet 协议栈**

--------------------

+ 应用层: 网络应用
  + 为人类用户或者其他应用进程提供网络应用服务
  + FTP, SMTP, HTTP,DNS
+ 传输层: 主机之间的数据传
  + 在网络层提供的端到端通信基础上，细分为进程到进程，将不可靠的通信变成可靠地通信
  + TCP, UDP
+ 网络层: 为数据报从源到目的选择路由
  + 主机主机之间的通信，端到端通信，不可靠
  + IP, 路由协议
+ 链路层: 相邻网络节点间的数据传输
  + 2个相邻2点的通信，点到点通信，可靠或不可靠
  + 点对对协议PPP, 802.11(wifi), Ethernet
+ 物理层: 在线路上传送bit

**ISO/OSI 参考模型**

-------------------

+ 表示层: 允许应用解释传输的 数据, e.g., 加密，压缩，机器相关的表示转换
+ 会话层: 数据交换的同步，检查点，恢复
+ 互联网协议栈没有这两层!
  + 这些服务，如果需要的话，必须被应用实现
  + 需要吗？

**各层次的协议数据单元**

-----------------------

+ 应用层：报文(message)
+ 传输层：报文段(segment)：TCP段，UDP数据报
+ 网络层：分组packet（如果无连接方式：数据报 datagram）
+ 数据链路层：帧(frame)
+ 物理层：位(bit)

## 1.8 历史

1960之前：线路交换网络

1961-1964：分组交换理论

1961-1972：分组交换试验网络ARPANet

1973-1980：应用和节点增多，酝酿体系变化

1980-1990：体系结构转换、TCP/IP 、应用和规模增大

1990-2000：Web，取消商业限制，新应用，规模

2000：用户和主机规模接入方式丰富化商业应用（电子商务，社交网络），移动互联，ICP对网络改造

**早期（1960以前）计算机网络**

------------

+ 线路交换网络
+ 线路交换的特性使得其不适合计算机之间的通信
  + 线路建立时间过长
  + 独享方式占有通信资源，不适合突发性很强的计算机之间的通信
  + 可靠性不高；非常不适合军事通信
+ 三个小组独立地开展分组交换的研究
  + 1961：Kleinrock(MIT)，排队论，展现了分组交换的有效性
  + 1964：Baran(美国兰德公司)-军用网络上的分组交换
  + 1964：Donald(英国)等，NPL

**1961-1972: 早期的分组交换概念**

-------------------

+ 1967: 美国高级研究计 划研究局考虑ARPAnet
  + Kleinrock在MIT的同事
+ 1969: 第一个 ARPAnet  节点开始工作,UCLA
  + IMP:接口报文处理机
+ 1969年底: 4个节点
+ 1972:
  + ARPAnet 公众演示
  + 网络控制协议是第一个端 系统直接的主机-主机协议
    + NCP协议：相当于传输层 和网络层在一起，支持应用开发
  + 第一个e-mail 程序（BBN）
  + ARPAnet有15个节点

**1972-1980: 专用网络和网络互联**

--------------

+ 出现了很多对以后来说重要的网络形式，雨后春笋
  + 1970: ALOHAnet,夏威夷上的微波网络
  + 1973: Metcalfe在博士论文中提出了 Ethernet
  + ATM网络
  + ALOHAnet，Telenet，Cyclades法国等
+ 1970后期，网络体系结构的必要性
  + 专用的体系结构： DECnet, SNA, XNA
  + 标准化的体系结构
+ 1974: 网际互联的Cerf and Kahn 体系结构
+ 1979: ARPAnet的规模在持续增加，体系结构也在酝酿着变化，以支持网络互联和其他目的（性能）需求
  + 节点数目增加，有200个节点

> Cerf and Kahn （互联网之父）网络互联原则:
>
> + 极简、自治
> + 尽力而为（best  effort）服务模型
> + 无状态的路由器
> + 分布控制
>
> 定义了今天的Internet体系 结构

**1980-1990: 体系结构变化, 网络数量激增，应用丰富**

-------------------

+ 1983: TCP/IP部署，标记日
  + NCP分化成2个层次，TCP/IP，从而出现UDP
  + 覆盖式IP解决网络互联问题
  + 主机设备和网络交换设备分开 
+ 1982: smtp e-mail协议定义
+ 1983: DNS 定义，完成域名 到IP地址的转换
+ 1985: ftp 协议定义
+ 1988: TCP拥塞控制
+ 其他网络形式的发展
  + 新的国家级网络: Csnet,  BITnet, NSFnet, Minitel
  + 1985年：ISO/OSI提出， 时机不对且太繁琐
  + 100,000主机连接到网络联邦

**1990, 2000’s: 商业化, Web, 新的应用**

-------------------------

+ 1990年代初: NSF对ARPAnet 的访 问网，双主干，ARPAnet退役
+ 1991: NSF放宽了对NSFnet用于商业目的的限制 (1995退役)， ASFNET非盈利性机构维护，后面叫Internet
+ UNIX 中TCP/IP的免费捆绑
+ 1990年代初: Web
  + hypertext [Bush 1945, Nelson 1960’s]
  +  HTML, HTTP: Berners-Lee
  + 1994: Mosaic (Netscape， andreesen)
  + 1990年代后期: Web的商业化
+ 1990后期 –21世纪：
  + TCP/IP体系结构的包容性，在 其上部署应用便捷，出现非常 多的应用
  + 新一代杀手级应用（即时讯息 ，P2P 文件共享，社交网络等 ）更进一步促进互联网的发展
  + 安全问题不断出现和修订（互联网的补丁对策）
  + 2001网络泡沫，使得一些好公司沉淀下来（谷歌，微软，苹 果，Yahoo，思科）
  + 主干网的速率达到Gbps

**2005-现在**

--------------------

+ ~50+亿主机：包括智能手机和平板
+ 宽带接入的快速部署
+ 高速无线接入无处不在：移动互联时代
  + 4G部署,5G蓄势待发
  + 带宽大，终端性能高，价格便宜，应用不断增多
+ 在线社交网络等新型应用的出现: 
  + Facebook: 10亿用户
  + 微信，qq：数十亿用户
+ 内容提供商（Google, Microsoft）创建他们自己的网络
  + 通过自己的专用网络提供对搜索、视频内容和电子邮件的即刻 访问
+ 电子商务，大学，企业在云中运行他们的服务(eg, Amazon EC2)
+ 体系结构酝酿着大的变化，未来网络蠢蠢欲动

## 1.9 小结

**小结**

---------------------------

<u>覆盖大量的材料</u>

+ Internet
+ 什么是协议
+ 网络边缘、核心、接入网络
  + 分组交换 vs. 电路交换
+ Internet/ISP 结构
+ 性能：丢失，延时，吞吐量
+ 层次模型和服务模型
+ 历史

**小结1**

-------------------------

+ 组成角度看什么是互联网
  + 边缘：端系统（包括应用）+ 接入网
  + 核心：网络交换设备+通信链路
  + 协议：对等层实体通信过程中遵守的规则的集合
    + 语法，语义，时序
+ 为了实现复杂的网络功能，采用分层方式设计、实现和调试
  + 应用层，传输层，网络层，数据链路层，物理层
  + 协议数据单位：
    + 报文，报文段，分组，帧，位
+ 从服务角度看互联网
  + 通信服务基础设施
    + 提供的通信服务：面向连接    无连接
  + 应用
+ 应用之间的交互
  + C/S 模式
  + P2P 模式

**小结2**

---------------------

+ 数据交换
  + 分组数据交换
  + 线路交换
+ 比较   线路交换和分组交换
+ 分组交换的2种方式
  + 虚电路
  + 数据报
+ 接入网和物理媒介
  + 接入网技术
    + 住宅：ADSL，拨号，cable modem
    + 单位：以太网
    + 无线接入方式
  + 物理媒介
    + 光纤，同轴电缆，以太网，双绞线
+ ISP层次结构

**小结3**

-------------------------

+ 分组交换网络中延迟和丢失是如何发生的
  + 延迟的组成：处理、传输、传播、排队
+ 网络的分层体系结构
  + 分层体系结构
  + 服务
  + 协议数据单元
  + 封装与解封装
+ 历史
